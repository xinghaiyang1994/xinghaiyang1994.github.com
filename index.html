<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
@keyframes test{
	from{ top:0;}
	to{ top:-56px;}	
}
#box{ width:400px; height:20px; margin-left:200px; overflow:hidden; position:relative; border-radius:10px; border:2px solid #ccc;}
#bar{ width:400px; height:200px; background:repeating-linear-gradient(45deg,red 0,red 10px,blue 10px,blue 20px); position:absolute; top:0;}
#color1{ color:#ff0000;}
#color2{ color:#0000ff;}
</style>
<script>
window.onload=function(){
	function setC3Style(obj,name,value){
		obj.style['Webkit'+name.charAt(0).toUpperCase()+name.substring(1)]=value;
		obj.style['Moz'+name.charAt(0).toUpperCase()+name.substring(1)]=value;
		obj.style['ms'+name.charAt(0).toUpperCase()+name.substring(1)]=value;
		obj.style['O'+name.charAt(0).toUpperCase()+name.substring(1)]=value;
		obj.style[name]=value;	
	}
	var oInp=document.querySelectorAll('input');
	var oS=document.querySelectorAll('.color');	
	var oBar=document.querySelector('#bar');
	setC3Style(oBar,'animation','test 1s linear infinite');
	for(var i=0;i<oS.length;i++){
		oInp[i].index=i;
		oInp[i].onchange=function(){
			oS[this.index].innerHTML=this.value;
			oS[this.index].style.color=this.value;
			oBar.style.background='-webkit-repeating-linear-gradient(45deg,'+oInp[0].value+' 0,'+oInp[0].value+' 10px,'+oInp[1].value+' 10px,'+oInp[1].value+' 20px)';
			oBar.style.background='-moz-repeating-linear-gradient(45deg,'+oInp[0].value+' 0,'+oInp[0].value+' 10px,'+oInp[1].value+' 10px,'+oInp[1].value+' 20px)';
			oBar.style.background='-ms-linear-gradient(45deg,'+oInp[0].value+' 0,'+oInp[0].value+' 10px,'+oInp[1].value+' 10px,'+oInp[1].value+' 20px)';
			oBar.style.background='-o-linear-gradient(45deg,'+oInp[0].value+' 0,'+oInp[0].value+' 10px,'+oInp[1].value+' 10px,'+oInp[1].value+' 20px)';
			oBar.style.background='repeating-linear-gradient(45deg,'+oInp[0].value+' 0,'+oInp[0].value+' 10px,'+oInp[1].value+' 10px,'+oInp[1].value+' 20px)';
		};
	}
};
</script>
</head>

<body>
	<span>颜色：</span>
	<input type="color" value="#ff0000" />
    <input type="color" value="#0000ff" /><br />
    <span class="color" id="color1">#ff0000</span>
    <span class="color" id="color2">#0000ff</span>
    <div id="box">
    	<div id="bar"></div>
    </div>
</body>
</html>
